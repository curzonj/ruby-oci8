2005-07-17  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/lob.c, ext/oci8/oci8.c, ext/oci8/oci8.h, lib/oci8.rb.in:
	  delete OCILobLocator. implement OCI8::LOB by C instead of ruby.
	* ext/oci8/svcctx.c: add more check in oci8_get_svcctx().

2005-07-17  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/bind.c, ext/oci8/lob.c, ext/oci8/oci8.h, ext/oci8/ocidatetime.c,
	  ext/oci8/ocinumber.c, ext/oci8/oradate.c, ext/oci8/oranumber.c,
	  ext/oci8/rowid.c, ext/oci8/stmt.c, ext/oci8/svcctx.c:
	  change arguments of (oci8_bind_class_t *)->init(). change the return
	  value of oci8_get_svcctx(). add oci8_get_oci_session().
	* lib/oci8.rb.in: change arguments of OCI8::BindType:Base.new().

2005-07-16  KUBO Takehiro  <kubo@jiubao.org>
	* metaconfig: move "require 'base64'" and "require 'zlib'" to the
	  next line of "def get_zcontent(file)" for a ruby which doesn't
	  have 'zlib'.

2005-07-10  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oci8.c, ext/oci8/oci8.h, ext/oci8/svcctx.c, lib/oci8.rb.in:
	  OCISvcCtx class is merged to OCI8 class. OCISvcCtx's public instance
	  methods become OCI8's private instance methods.
	* ext/oci8/depend: deleted.

2005-07-10  KUBO Takehiro  <kubo@jiubao.org>
	* Makefile, ext/oci8/extconf.rb: change version to 0.2.0-alpha.
	* ext/oci8/extconf.rb: add "ocidatetime.o" to $objs. add '--with-instant-client'
	  to Makefile when setup.rb is called with '--with-instant-client'.
	* ext/oci8/oci8.c: add oci8_base_class. fix bug in oci8_handle_initialize().
	  call Init_oci_datetime() in Init_oci8().
	* ext/oci8/oci8.h: add macros oci_lc, CHECK_STRING, TO_STRING_PTR and TO_STRING_LEN.
	* ext/oci8/ocinumber.c: add oci8_get_ocinumber().
	* ext/oci8/ocidatetime.c: add a new file for OCIDateTime.

2005-07-09  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/bind.c, ext/oci8/lob.c, ext/oci8/oci8.h, ext/oci8/oradate.c,
	   ext/oci8/oranumber.c, ext/oci8/rowid.c, ext/oci8/stmt.c:
	   use doubly linked list to free OCI8::BindType::*.
	* ext/oci8/extconf.rb, ext/oci8/oci8.c, ext/oci8/ocinumber.c: add OCINumber.

2005-07-03  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/*.c, ext/oci8/*.h: remove oci8_handle_t and oci8_base_class_t.
	  use oci8_base_t and oci8_bind_t instead of them. use oci8_base_class_t
	  and oci8_bind_class_t.
	* ext/oci8/descriptor.c, ext/oci8/handle.c: removed.
	* ext/oci8/rowid.c: added.

2005-07-01  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: try default $libs then get from demo_rdbms.mk.

2005-06-29  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: don't read sysliblist when instant client.

2005-06-12  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/const.c: delete unused constants.
	   move some oci_id_* to ext/oci8/error.c.
	   move oci8_sym_*stmt to ext/oci8/stmt.c.
	* ext/oci8/error.c: 
	   move some oci_id_* from ext/oci8/const.c.
	   move subclasses of cOCIException from ext/oci8/oci8.c.
	* ext/oci8/extconf.rb: add have_func("localtime_r").
	* ext/oci8/handle.c: delete explicit OCIParam.
	* ext/oci8/lob.c: delete #ifdef OCI8_USE_CALLBACK_LOB_READ.
	* ext/oci8/oci8.c: 
	   move subclasses of cOCIException to ext/oci8/error.c.
	   move cOraDate to ext/oci8/oradate.c.
	   move cOraNumber to ext/oci8/oranumber.c.
	* ext/oci8/oci8.h:
	   move ora_date_t to ext/oci8/oradate.c.
	   move ora_number_t and ora_vnumber_t to ext/oci8/oranumber.c.
	* ext/oci8/oradate.c: fix indentation.
	   move cOraDate from ext/oci8/oci8.c.
	   move ora_date_t from ext/oci8/oci8.h.
	* ext/oci8/oranumber.c: fix indentation.
	   move cOraNumber from ext/oci8/oci8.c.
	   move ora_number_t and ora_vnumber_t from ext/oci8/oci8.h.
	* ext/oci8/param.c: delete OCIParam#paramGet().
	* ext/oci8/stmt.c: 
	   move oci8_sym_*stmt from ext/oci8/const.c.
	   fix OCIStmt#prepare() and OCIStmt#execute().

2005-06-12  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/bind.c: add oci8_register_bind_type().
	   move bind_rowid* to ext/oci8/descriptor.c.
	   move bind_clob* and bind_blob* to ext/oci8/lob.c.
	   move bind_oradate* to ext/oci8/oradate.c.
	   move bind_oranumber* and bind_integer* to ext/oci8/oranumber.c.
	   move bind_stmt* to ext/oci8/stmt.c.
	* ext/oci8/const.c: add oci8_sym_*_stmt. delete ruby constants OCI_STMT_*.
	* ext/oci8/descriptor.c: move bind_rowid* from ext/oci8/bind.c.
	* ext/oci8/lob.c: move bind_clob* and bind_blob* from ext/oci8/bind.c.
	* ext/oci8/oci8.c: change initialization order for oci8_register_bind_type().
	* ext/oci8/oci8.h: add oci8_register_bind_type(). add oci8_sym_*_stmt.
	* ext/oci8/oradate.c: move bind_oradate* from  ext/oci8/bind.c.
	   oci8_set_ora_date() become a static function.
	   delete oci8_get_ora_date().
	* ext/oci8/oranumber.c: move bind_oranumber* and bind_integer* from ext/oci8/bind.c.
	* ext/oci8/stmt.c: move bind_stmt* from ext/oci8/bind.c.
	   OCIStmt#stmt_type returns a Symbol instead of a Fixnum.
	* lib/oci8.rb.in: OCI8::Cursor#type returns a Symbol instead of a Fixnum.

2005-06-12  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/extconf.rb: add have_func("OCILobLocatorAssign").
	* ext/oci8/lob.c: delete OCILobLocator#getChunkSize().
	   use OCILobAssign instead of OCILobLocatorAssign on Oracle 8.
	* ext/oci8/attr.c, ext/oci8/oci8.h: delete OCI*#attrGet(), OCI*#attrSet().
	* ext/oci8/const.c: delete OCI_ATTR_* constants.
	* ext/oci8/descriptor.c: delete OCIDescriptor#attrGet(), OCIDescriptor#attrSet().
	* ext/oci8/handle.c: delete OCIHandle#attrGet(), OCIHandle#attrSet().
	* ext/oci8/param.c: add OCIParam#name, OCIParam#data_type, OCIParam#data_size, 
	   OCIParam#precision and OCIParam#scale.
	* ext/oci8/stmt.c: add OCIStmt#stmt_type, OCIStmt#row_count, OCIStmt#rowid and
	   OCIStmt#param_count.
	* lib/oci8.rb.in: use OCIParam#name, OCIParam#data_type, OCIParam#data_size, 
	   OCIParam#precision, OCIParam#scale, OCIStmt#stmt_type, OCIStmt#row_count, 
	   OCIStmt#rowid and OCIStmt#param_count instead of OCIHandle#attrGet() and
	   OCIDescriptor#attrGet().

2005-06-12  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: rewrie OraConf#check_lp64().
	* ext/oci8/bind.c, ext/oci8/descriptor.c, ext/oci8/env.c,
	  ext/oci8/handle.c, ext/oci8/lob.c, ext/oci8/oci8.h,
	  ext/oci8/stmt.c, ext/oci8/svcctx.c, lib/oci8.rb.in:
	   delete an OCIEnv instance from each instance method's argument.
	   get it from the internal global variable in C.
	* ext/oci8/oci8.c, lib/DBD/OCI8/OCI8.rb: change the OCIBind class name
	   to OCI8::BindType::Base.
	* lib/oci8.rb.in: fix typo rb_eArgError to ArgumentError.

2005-06-08  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: test __64BIT__ to check whether lp64. (for AIX 64bit)

2005-05-31  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: fix for cygwin. fix for oracle instant client.
	* metaconfig: add distbin task.

2005-05-29  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: change the detection logic for Multiple
	  Oracle Homes on Windows.

2005-05-24  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: use "-L#{@oracle_home}/lib(32) -lclntsh" as
	   a last resort.

2005-04-14  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: fix for Cygwin with Oracle instant client.
	   add Oraconf#lp64, which is true when long and pointer are 64 bits.
	   improve error message.

2005-04-10  KUBO Takehiro  <kubo@jiubao.org>
	* README: change the document format for rdoc.
	* ext/oci8/bind.c, ext/oci8/descriptor.c, ext/oci8/env.c,
	   ext/oci8/error.c, ext/oci8/const.c, ext/oci8/handle.c
	   ext/oci8/oci8.c, ext/oci8/oci8.h, ext/oci8/stmt.c:
	   change bind_type_t structure. bind_* variables in binc.c
	   become OCI8::BindType::* which are subclasses of OCIBind.
	   add envh member to oci8_handle_t and oci8_bind_handle_t.
	   add OCIRowid#initialize.
	   delete macros to compile on ruby 1.6.
	* lib/oci8.rb.in: add comments for rdoc.
	   change OCI8::BindType::*.
	* lib/DBD/OCI8/OCI8.rb
	   change DBI::DBD::OCI8::BindType::*.

2005-04-06  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oci8.h, ext/oci8/handle.c: delete enum oci8_bind_type.
	  add oci8_bind_type_t.
	* ext/oci8/bind.c: add oci8_bind_type_t structures bind_string, bind_raw,
	   bind_fixnum, bind_float, bind_oradate, bind_integer, bind_oranumber,
	   bind_rowid, bind_clob, bind_blob, and bind_stmt.
	   add oci8_bind_type_set() and oci8_bind_type_get() to get/set 
	   an oci8_bind_type_t structure.
	   delete oci8_get_value() and oci8_set_value(), use
	   (oci8_bind_type_t*)->get()/set() instead.
	* ext/oci8/stmt.c: change check_bind_type() by using oci8_bind_type_t.
	  change oci8_define_by_pos(), oci8_bind_by_pos() and oci8_bind_by_name().
	* ext/oci8/MANIFEST, ext/oci8/depend, ext/oci8/extconf.rb, ext/oci8/oci8.c,
	  ext/oci8/define.c: delete define.c and Init_define().
	* lib/oci8.rb.in: change OCI8::BindType::Float, OCI8::BindType::Fixnum,
	  OCI8::BindType::Integer and OCI8::BindType::OraNumber for in-bind.

2005-04-03  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/oraconf.rb: improve Oracle instance client check:
	   1. add more strict libclntsh.so check.
	   2. change LD_LIBRARY_PATH message by its platform.
	   3. add '-Wl,-rpath,#{lib_dir}' to $libs when Linux.
	* ext/oci8/MANIFEST, ext/oci8/depend, ext/oci8/extconf.rb:
	   delete server.c and session.c.
	* ext/oci8/attr.c: delete OCISvcCtx#attrGet(OCI_ATTR_NONBLOCKING_MODE),
	   OCISvcCtx#attrSet(OCI_ATTR_NONBLOCKING_MODE, nil),
	   OCISvcCtx#attrSet(OCI_ATTR_SERVER, aOCIServer),
	   OCISvcCtx#attrSet(OCI_ATTR_SESSION, aOCISession).
	* ext/oci8/const.c: delete constants unused by high-level API.
	   delete oci8_id_server, oci8_id_session.
	* ext/oci8/handle.c, ext/oci8/descriptor.c: use ruby1.8 allocation
	   framework.
	* ext/oci8/env.c: add OCIEnv.new. delete OCIEnv.initialise(),
	   OCIEnv.init(), OCIEnv.create(), OCIEnv.terminate(),
	   OCIEnv#alloc(), OCIEnv#logon().
	* ext/oci8/oci8.c, ext/oci8/oci8.h: use ruby1.8 allocation
	   framework. delete OCIServer and OCISession.
	* ext/oci8/lob.c: add OCILobLocator.new
	* ext/oci8/stmt.c: add OCIStmt.new
	* ext/oci8/svcctx.c: add OCISvcCtx.new, OCISvcCtx#non_blocking?,
	   OCISvcCtx#non_blocking=
	* ext/oci8/server.c, ext/oci8/session.c: deleted.
	* lib/oci8.rb.in: use OCIEnv.new and OCISvcCtx.new instead of
	   OCIEnv.create, OCIEnv#alloc, OCISession#begin, OCIServer#attach.
	   use OCISvcCtx.logoff instead of OCISession#end, OCIServer#detach,
	   OCISvcCtx.free. use OCISvcCtx#non_blocking? instead of
	   OCISvcCtx#attrGet(OCI_ATTR_NONBLOCKING_MODE).
	   use OCISvcCtx#non_blocking= instead of
	   OCISvcCtx#attrSet(OCI_ATTR_NONBLOCKING_MODE, nil).
	   use <OCICLASS>.new(anOCIEnv) instead of
	   OCIEnv#alloc(<OCIClass>)
	* lib/DBD/OCI8/OCI8.rb: use OCIStmt.new(env) instead of
	   env.alloc(OCIStmt).

2005-03-27  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/server.c: delete OCIServer#version, OCIServer#break, OCIServer#reset.
	* ext/oci8/stmt.c: OCIStmt#bindByName accepts a symbol as a bind name.
	* lib/oci8.rb.in: add OCI8::LOB#sync, OCI8::LOB#sync= and OCI8::LOB#flush.
	* test/test_bind_raw.rb, test/test_bind_time.rb, test/test_clob.rb,
	  test/test_oradate.rb, test/test_oranumber.rb: use OCI8 high-level API
	  instead of low-level API.

2005-03-24  KUBO Takehiro  <kubo@jiubao.org>
	* oci8.rb.in: fix bug on binding Time or Date.
	* support/*: deleted.
	* test/*.rb: use 'test/unit' instead of runit.
	  ruby 1.6.8 won't be supported by this commit.
	* ext/oci8/MANIFEST, ext/oci8/depend, ext/oci8/describe.c(deleted),
	  ext/oci8/env.c, ext/oci8/extconf.rb, ext/oci8/handle.c,
	  ext/oci8/oci8.c, ext/oci8/oci8.h, ext/oci8/svcctx.c:
	  delete OCIDescribe and OCISvcCtx#describeAny. OCIDescribe isn't used by
	  oci8 high-level API.
	* test/test_all.rb, test/test_describe.rb(deleted): delete OCIDescribe
	  test cases.

2005-03-23  KUBO Takehiro  <kubo@jiubao.org>
	* oci8.rb.in, OCI8.rb:
	delete OCI8.register_type_fixer, OCI8::TypeFixer.
	add OCI8::BindType::* instead.

2005-03-21  KUBO Takehiro  <kubo@jiubao.org>
	* oci8.rb.in, OCI8.rb: refactoring OCI8::Cursor#define_a_column
	* Makefile, ext/oci8/extconf.rb: change version to 0.1.10

2005-03-20  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/stmt.c, lib/oci8.rb.in, lib/DBD/OCI8/OCI8.rb, test/test_dbi.rb:
	  enable DATE to be bound as a DBI::Date or a DBI::Timestamp.

2005-03-20  KUBO Takehiro  <kubo@jiubao.org>
	* ext/oci8/stmt.c, lib/oci8.rb.in, test/test_oci8.rb:
	  bind a ref cursor as an OCI8::Cursor.
          apply a patch at <URL:http://rubyforge.org/tracker/index.php?func=detail&aid=1409&group_id=256&atid=1053>.

2005-01-16  KUBO Takehiro  <kubo@jiubao.org>

	* lib/oci8.rb.in: change default bindtype for NUMBER with
	  unspecified scale.
	  (This problem is reported by William Lawson, Dmitry Maksyoma and Andreas Habel)
	* lib/oci8.rb.in: add OCI8::Cursor.select_number_as=
	  (for someone who want old bindtype)
	* lib/oci8.rb.in: add OCI8::Cursor#fetch_hash
	  (contributed by Jason Sweat)
	* ext/oci8/oci8.h, ext/oci8/stmt.c: don't raise an error when OCI_SUCCESS_WITH_INFO.
	  (suggested by Kenji Nishishiro)
	* ext/ooi8/oraconf.rb: support Oracle Instant Installer.
	  (suggested by Eustaquio Rangel de Oliveira Jr.)
	* Makefile, ext/oci8/extconf.rb: change version to 0.1.9

2004-10-30  KUBO Takehiro  <kubo@jiubao.org>

	* pre-distclean.rb: delete a temporary file made by ext/oci8/oraconf.rb.
	* ext/oci8/oraconf.rb: 1. change object files to an archive file
	  to work around on Oracle 8.1.7. 2. raise error when OCI.H can't
	  be found on Windows.

2004-06-21  KUBO Takehiro  <kubo@jiubao.org>

	* Makefile, ext/oci8/extconf.rb: change version to 0.1.8-pre1
	* lib/DBD/OCI8/OCI8.rb: add DBI::DatabaseHandle#tables. add DBI::StatementHandle#func(:bind_value, ...).

2004-03-07  KUBO Takehiro  <kubo@jiubao.org>

	* ext/oci8/extconf.rb: fix to use setup.rb.
	* ext/oci8/oraconf.rb: add support Borland C++ Builder.
	* lib/oci8.rb.in: support OCI8::CLOB.
	* test/config.rb: CLOB test file depends on NLS_LANG.
	* test/test_oci8.rb: fix a test method.
	* test/test_break.rb: break time depends on OS?...
	* test/test_dbi_clob.rb: add a new file to test CLOB via DBI.

2003-09-20  KUBO Takehiro  <kubo@jiubao.org>

	* src/handle.c: fix bug of OCI8::BLOB at running GC.
	* src/stmt.c: accept Bignum as (({type})) of OCI8::Cursor#define.
	* src/lib/oci8.rb.in: accept OCI8::BLOB as (({type})) of OCI8::Cursor#define.
	* src/lib/DBD/OCI8/OCI8.rb: add (({define})) function to DBD::OCI8.
	* src/oranumber.c, src/oci8.h: use rb_cstr_to_dbl instead of strtod for ruby 1.8.
	* support/runit/cui/testrunner.rb, support/runit/testcase.rb: fix for ruby 1.8.
	* test/test_dbi.rb: add a test method.
	* test/test_oci8.rb: fix a test method.

2003-08-03  KUBO Takehiro  <kubo@jiubao.org>

	* Makefile: update version to 0.1.5
	* MANIFEST: add test/test_oci8.rb
	* src/lib/oci8.rb.in: implement OCI8::Cursor#define, OraDate#to_time and OraDate#to_date.
	* test/test_oci8.rb: add new tests of OCI8::Cursor#define.
	* test/test_oradate.rb: add new tests of OraDate#to_time and OraDate#to_date.
	* test/test_all.rb: call test_oci8.rb.

2003-07-20  KUBO Takehiro  <kubo@jiubao.org>

	* src/stmt.c: When the error "ORA-01000: maximum open cursors
	  exceeded" happens, run garbage collect to close unused cursors
	  and retry automatically.

2003-06-07  KUBO Takehiro  <kubo@jiubao.org>

	* Makefile: update version to 0.1.4
	* src/lob.c: add OCILobLocator#clone()
	* src/bind.c, src/stmt.c, src/lib/oci8.rb.in: fix BLOB support.
	* src/lib/DBD/OCI8/OCI8.rb: set the backtrace of an original exception
	 to newly created DBI exception.
	* src/oraconf.rb: retry get_libs with postfix '32' when	compilation
	 failed with Oracle 9i on Solaris.
	* src/oradate.c: add OraDate#<=> and include 'Comparable'.
	 (contributed by Brian Candler)
	* test/test_oradate.rb: add test cases of OraDate#<=>.

2003-04-27  KUBO Takehiro  <kubo@jiubao.org>

	* Makefile: update version to 0.1.3
	* doc/api.*.rd, doc/api.*.html: update document.
	* src/lob.c: add new LOB APIs.
	* src/lib/oci8.rb.in: add BLOB support.
	* src/lib/DBD/OCI8/OCI8.rb: add 'NonBlocking' support(suggested by Brian Candler).
	raise subclass of DBI::DatabaseError, which depends on its error code.

2003-03-08  KUBO Takehiro  <kubo@jiubao.org>

	* Makefile: update version to 0.1.2
	* src/extconf.rb: use Oraconf#cc_is_gcc.
	* src/oraconf.rb: support Solaris with gcc.
	* src/handle.c: suppress warning about uninitialized instance variables.
	* src/oranumber.c, test/test_oranumber.rb: fix serious bug of 
	conversion routine from Oracle internal number format to string.

2003-02-01  KUBO Takehiro  <kubo@jiubao.org>

	* Makefile: update version to 0.1.1.
	* src/oraconf.rb: added. Oracle specific features were moved from
	src/extconf.rb, src/extunix.rb and src/extwin32.rb
	* src/extunix.rb, src/extwin32.rb: deleted.
	* src/extconf.rb: use oraconf.rb.
	* src/error.c, src/oci8.h: use macro RBOCI_NORETURN not NORETURN.
	* MANIFEST, Makefile: fix for added and deleted files.

2002-09-12  KUBO Takehiro  <kubo@jiubao.org>

	* Makefile: update version to 0.1.0.
	* README: support cygwin and mingw32.
	* test/test_oradate.rb: delete test_now().
	* src/extconf.rb: support mingw32.

2002-09-12  Hitoshi Endoh <h-endoh@mbf.nifty.com>

	* src/extwin32.rb: support cygwin.

2002-09-12  KUBO Takehiro  <kubo@jiubao.org>

	* ChangeLog: Added.
